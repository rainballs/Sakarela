{% load static %}
<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <title>Сакарела</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}?v={{ STATIC_VERSION }}">

    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<body>
<header>
    <nav class="site-nav">
        <div class="nav-container">
            <!-- Hamburger for mobile -->
            <button class="hamburger" id="mobile-menu-toggle" aria-label="Отвори меню" aria-controls="mobile-menu" aria-expanded="false">
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
                <span class="hamburger-bar"></span>
            </button>
            <ul class="nav-left">
                <li><a href="{% url 'home' %}">Начало</a></li>
                <li><a href="{% url 'about' %}">За Нас</a></li>
                <li><a href="{% url 'recipe_list' %}">Рецепти</a></li>
            </ul>
            <div class="nav-logo">
                <a href="{% url 'home' %}">
                    <img src="/media/uploads/logos/sakarela_logo.png" alt="Сакарела">
                </a>
            </div>
            <ul class="nav-right">
                <li><a href="{% url 'products' %}">Продукти</a></li>
                <li><a href="{% url 'contact' %}">Контакти</a></li>
                <li>
                    <a href="{% url 'store:store_home' %}" class="buy-online">
                        Купи Онлайн
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Slide-in mobile menu -->
    <div id="mobile-menu" class="mobile-slide-menu" aria-hidden="true">
        <button class="close-mobile-menu" id="close-mobile-menu" aria-label="Затвори меню">&times;</button>
        <ul>
            <li><a href="{% url 'home' %}">Начало</a></li>
            <li><a href="{% url 'about' %}">За Нас</a></li>
            <li><a href="{% url 'recipe_list' %}">Рецепти</a></li>
            <li><a href="{% url 'products' %}">Продукти</a></li>
            <li><a href="{% url 'contact' %}">Контакти</a></li>
            <li><a href="{% url 'store:store_home' %}">Купи Онлайн</a></li>
        </ul>
    </div>
    <div id="mobile-menu-backdrop" class="mobile-menu-backdrop"></div>
</header>


{% block content %}{% endblock %}

<footer class="site-footer">
    <div class="footer-container">
        <div class="footer-links">
            <ul>
                <li><a href="{% url 'home' %}">Начало</a></li>
                <li><a href="{% url 'about' %}">За Нас</a></li>
                <li><a href="{% url 'products' %}">Продукти</a></li>
                <li><a href="{% url 'contact' %}">Контакти</a></li>
                <li><a href="{% url 'store:store_home' %}">Магазин</a></li>
            </ul>
        </div>
        <div class="footer-logos">
            <img src="/media/uploads/logos/sakarela_logo.png" alt="Сакарела">
            <img src="/media/uploads/logos/eu-logo.jpg" alt="EU">
            <img src="/media/uploads/logos/program-logo.jpg" alt="Program">
        </div>
        <p class="footer-copy">© Всички права запазени САКАРЕЛА | Designed by Modify</p>
    </div>
</footer>
<!-- Add JS for mobile menu toggle -->
<script>
    const menuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const closeMenu = document.getElementById('close-mobile-menu');
    const backdrop = document.getElementById('mobile-menu-backdrop');
    function openMenu() {
        mobileMenu.classList.add('open');
        backdrop.classList.add('show');
        menuToggle.setAttribute('aria-expanded', 'true');
        mobileMenu.setAttribute('aria-hidden', 'false');
    }
    function closeMenuFn() {
        mobileMenu.classList.remove('open');
        backdrop.classList.remove('show');
        menuToggle.setAttribute('aria-expanded', 'false');
        mobileMenu.setAttribute('aria-hidden', 'true');
    }
    menuToggle.addEventListener('click', openMenu);
    closeMenu.addEventListener('click', closeMenuFn);
    backdrop.addEventListener('click', closeMenuFn);
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeMenuFn();
    });

    // --- SWIPE GESTURE FOR HAMBURGER MENU (mobile/tablet only) ---
    let touchStartX = 0;
    let touchEndX = 0;
    function handleTouchStart(e) {
        if (e.touches && e.touches.length === 1) {
            touchStartX = e.touches[0].clientX;
        }
    }
    function handleTouchMove(e) {
        if (e.touches && e.touches.length === 1) {
            touchEndX = e.touches[0].clientX;
        }
    }
    function handleTouchEnd() {
        const minSwipeDistance = 60; // px
        if (touchEndX - touchStartX > minSwipeDistance && window.innerWidth <= 1024) {
            openMenu();
        }
        touchStartX = 0;
        touchEndX = 0;
    }
    document.addEventListener('touchstart', handleTouchStart, {passive:true});
    document.addEventListener('touchmove', handleTouchMove, {passive:true});
    document.addEventListener('touchend', handleTouchEnd, {passive:true});
</script>
</body>
</html>
