{% extends 'base.html' %}
{% load static %}
{% block title %}Рецепти | Сакарела{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <div class="recipe-hero">
        <div class="recipe-hero-content">
            <h1 class="recipe-hero-title">РЕЦЕПТИ</h1>
            <p class="recipe-hero-subtitle">Открийте вкусните рецепти с нашите висококачествени продукти</p>
        </div>
    </div>

    <!-- Recipe Grid Section -->
    <div class="recipe-container">
        {% for product in products_with_recipes %}
            <div class="product-recipes-section">
                <h2 class="product-section-title">Рецепти с {{ product.title }}</h2>
                <div class="recipe-grid">
                    {% for recipe in product.recipes.all %}
                        <div class="recipe-card">
                            <a href="{% url 'recipe_detail' recipe.pk %}" class="recipe-card-link">
                                <div class="recipe-image-wrapper">
                                    <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}" class="recipe-image">
                                </div>
                                <div class="recipe-card-content">
                                    <h3 class="recipe-title">{{ recipe.title }}</h3>
                                    <div class="recipe-meta">
                                        <span class="recipe-time">
                                            <i class="fas fa-clock"></i>
                                            {{ recipe.cook_time }} мин
                                        </span>
                                        <span class="recipe-servings">
                                            <i class="fas fa-users"></i>
                                            {{ recipe.servings }} порции
                                        </span>
                                    </div>
                                    <a href="{% url 'recipe_detail' recipe.pk %}" class="recipe-card-button">Прочети
                                        рецептата</a>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                    <!-- Fill empty slots to maintain 4-column layout -->
                    {% with recipe_count=product.recipes.count %}
                        {% if recipe_count < 4 %}
                            {% for i in "1234" %}
                                {% if forloop.counter > recipe_count %}
                                    <div class="recipe-card empty-card"></div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                </div>
            </div>
        {% endfor %}
    </div>
    <!-- FEATURE ROW -->
    <section class="feature-row">
        <div class="feature-list">
            <div class="feature-item">Най-високо качество суровини от доказани ферми</div>
            <div class="feature-item">Вероятно най-големият производител на кашкавал в България</div>
            <div class="info-logo">
                <img src="{% static 'uploads/traditional_tech_logo_clear.png' %}" alt="100% Българско мляко">
            </div>
            <div class="feature-item">Висококвалифицирани специалисти и технологии</div>
            <div class="feature-item">Модерна и съвременна база за производство</div>
        </div>
    </section>
    <section class="yellow-bar">
        <p>ПРОДУКТИ С ГАРАНТИРАНО КАЧЕСТВО И ПРОИЗХОД</p>
    </section>

{% endblock %}
