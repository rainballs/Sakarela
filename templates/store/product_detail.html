{% extends 'store/base_store.html' %}

{% load static %}

{% block title %}{{ product.name }}{% endblock %}

{% block content %}
    <section class="product-detail-page">
        <div class="section-container">

            <!-- IMAGE + MAIN INFO -->
            <div class="image-text split-layout">
                <div class="image-column">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                </div>
                <div class="info-column">
                    <h2>{{ product.name }}</h2>
                    <p>{{ product.description }}</p>

                    <div class="accordion">
                        <div class="accordion-item">
                            <h3 class="accordion-header">üßÄ –°—ä—Å—Ç–∞–≤</h3>
                            <p class="accordion-content">{{ product.ingredients }}</p>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header">üì¶ –°—ä—Ö—Ä–∞–Ω–µ–Ω–∏–µ</h3>
                            <p class="accordion-content">{{ product.storage }}</p>
                        </div>
                        <div class="accordion-item">
                            <h3 class="accordion-header">‚ùì –•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞</h3>
                            {% if product.nutrition %}
                                <div class="accordion-content">
                                    <ul class="nutrition-list" style="list-style: none; padding: 0; margin: 0;">
                                        <li><strong>–•—Ä–∞–Ω–∏—Ç–µ–ª–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç –∑–∞ 100g:</strong></li>
                                        <li>–ï–Ω–µ—Ä–≥–∏–π–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç: {{ product.nutrition.energy }}</li>
                                        <li>–ú–∞–∑–Ω–∏–Ω–∏: {{ product.nutrition.fat }}g</li>
                                        <li>–û—Ç –∫–æ–∏—Ç–æ –Ω–∞—Å–∏—Ç–µ–Ω–∏ –º–∞—Å—Ç–Ω–∏ –∫–∏—Å–µ–ª–∏–Ω–∏: {{ product.nutrition.saturated_fat }}g
                                        </li>
                                        <li>–í—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–∏: {{ product.nutrition.carbohydrates }}g</li>
                                        <li>–û—Ç –∫–æ–∏—Ç–æ –∑–∞—Ö–∞—Ä–∏: {{ product.nutrition.sugars }}g</li>
                                        <li>–ë–µ–ª—Ç—ä—Ü–∏: {{ product.nutrition.protein }}g</li>
                                        <li>–°–æ–ª: {{ product.nutrition.salt }}g</li>
                                    </ul>
                                </div>
                            {% else %}
                                <p class="accordion-content">–ù—è–º–∞ –Ω–∞–ª–∏—á–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è.</p>
                            {% endif %}
                        </div>
                    </div>

                    <div class="product-actions">
                        {% if product.is_on_sale %}
                            <a href="{% url 'store:add_to_cart' product.pk %}" class="btn-cart">
                                –î–æ–±–∞–≤–∏ –Ω–∞ –ø—Ä–æ–º–æ —Ü–µ–Ω–∞ ({{ product.sale_price }} –ª–≤.)
                            </a>
                        {% else %}
                            <a href="{% url 'store:add_to_cart' product.pk %}" class="btn-cart">
                                –î–æ–±–∞–≤–∏ –≤ –∫–æ–ª–∏—á–∫–∞—Ç–∞ ({{ product.price }} –ª–≤.)
                            </a>
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>
    </section>
    {##}
    {#        <div class="quality-top-bg">#}
    {#            <div class="quality-overlay">#}
    {#                <div class="quality-content">#}
    {#                    <img src="{% static 'uploads/1 (1).png' %}" alt="–ú–ª—è–∫–æ –∏ —Ñ–µ—Ä–º–∞" class="quality-icon">#}
    {#                    <div class="quality-text">#}
    {#                        <h2>–ü—ä—Ä–≤–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–∏ —Å—É—Ä–æ–≤–∏–Ω–∏,<br>–¥–æ–±–∏–≤–∞–Ω–∏ –≤ –ø—ä—Ä–≤–æ–∫–ª–∞—Å–Ω–∏ —Ñ–µ—Ä–º–∏</h2>#}
    {#                        <p>–ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–æ 100% –Ω–∞—Ç—É—Ä–∞–ª–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏.</p>#}
    {#                    </div>#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}

    <section class="product-detail-page">
        <div class="section-container">
            <section class="other-products">
                <h2>–î—Ä—É–≥–∏ –ø—Ä–æ–¥—É–∫—Ç–∏</h2>
                <div class="product-grid">
                    {% for other in related_products %}
                        {% if other.id != product.id %}
                            <a href="{% url 'store:product_detail' other.pk %}">
                                <div class="product-card">
                                    <img src="{{ other.image.url }}" alt="{{ other.name }}">
                                    {% if other.badge %}
                                        <img src="{{ other.badge.url }}" alt="badge" class="badge-img">
                                    {% endif %}
                                    <div class="card-body">
                                        <h3 class="card-title">{{ other.name }}</h3>
                                        <p class="card-subtitle">{{ other.badge_text }}</p>
                                    </div>
                                </div>
                            </a>
                        {% endif %}
                        {% empty %}
                        <p>–ù—è–º–∞ –¥—Ä—É–≥–∏ –ø—Ä–æ–¥—É–∫—Ç–∏.</p>
                    {% endfor %}
                </div>
            </section>
        </div>
    </section>
    <div class="section-container">
        <section class="team-banner">
            <img src="{% static 'uploads/team_banner.png' %}" alt="–ï–∫–∏–ø—ä—Ç –Ω–∞ –°–∞–∫–∞—Ä–µ–ª–∞">
        </section>
        <section class="yellow-bar">
            <p>–ü–†–û–î–£–ö–¢–ò –° –ì–ê–†–ê–ù–¢–ò–†–ê–ù–û –ö–ê–ß–ï–°–¢–í–û –ò –ü–†–û–ò–ó–•–û–î</p>
        </section>
    </div>


    <script>
        document.querySelectorAll('.accordion-item').forEach(item => {
            const header = item.querySelector('.accordion-header');
            header.addEventListener('click', () => item.classList.toggle('open'));
        });
    </script>
{% endblock %}
