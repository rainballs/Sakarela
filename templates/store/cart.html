{% extends 'store/base_store.html' %}
{% load static %}
{% block title %}–ö–æ–ª–∏—á–∫–∞{% endblock %}

{% block content %}
    <div class="container cart-container">
        <h1 class="cart-title">–ö–æ–ª–∏—á–∫–∞</h1>

        {% if cart_items %}
            <table class="cart-table">
                <thead>
                <tr>
                    <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                    <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                    <th>–¶–µ–Ω–∞</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                {% for item in cart_items %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td class="cart-qty">
                            <a href="{% url 'store:update_cart_quantity' item.product.id 'decrement' %}"
                               class="qty-btn">-</a>
                            <span class="qty-count">{{ item.qty }}</span>
                            <a href="{% url 'store:update_cart_quantity' item.product.id 'increment' %}"
                               class="qty-btn">+</a>
                        </td>
                        <td>
                            {% if item.product.is_on_sale %}
                                <span class="old-price">{{ item.product.price }} –ª–≤.</span>
                                <strong class="sale-price">{{ item.product.sale_price|floatformat:2 }} –ª–≤.</strong>
                            {% else %}
                                <strong>{{ item.product.price|floatformat:2 }} –ª–≤.</strong>
                            {% endif %}
                        </td>
                        <td>
                            <a href="{% url 'store:remove_from_cart' item.product.id %}" class="delete-btn">üóë</a>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
                <tfoot>
                <tr class="total-row">
                    <td colspan="2"></td>
                    <td colspan="2" class="cart-total">–û–±—â–æ: <strong>{{ cart_total|floatformat:2 }} –ª–≤.</strong></td>
                </tr>
                </tfoot>
            </table>
            <div class="cart-actions">
                <a href="{% url 'store:store_home' %}" class="btn-secondary">‚Üê –ö—ä–º –º–∞–≥–∞–∑–∏–Ω</a>
                <a href="{% url 'store:order_info' %}" class="btn btn-primary">–ü—Ä–æ–¥—ä–ª–∂–∏ –∫—ä–º –ø–æ—Ä—ä—á–∫–∞</a>
            </div>
        {% else %}
            <div class="empty-cart">
                <p class="cart-empty">–ö–æ–ª–∏—á–∫–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞</p>
                <img
                        src="{% static 'uploads/empty_cart.png' %}"
                        alt="Empty cart"
                        class="empty-cart-image"
                >
            </div>
            <div class="summary-actions">
                <a href="{% url 'store:store_home' %}" class="btn-secondary">‚Üê –ö—ä–º –º–∞–≥–∞–∑–∏–Ω</a>
            </div>
        {% endif %}
    </div>
{% endblock %}
