{% extends 'store/base_store.html' %}
{% load static %}
{% block title %}–ö–æ–ª–∏—á–∫–∞{% endblock %}

{% block content %}
    <div class="container cart-container">
        <div class="cart-title-container">
            <h1 class="cart-title">–ö–æ–ª–∏—á–∫–∞</h1>
        </div>

        {% if cart_items %}
            <div class="cart-items-box">
                <table class="cart-table">
                    <thead>
                    <tr>
                        <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                        <th>–†–∞–∑—Ñ–∞—Å–æ–≤–∫–∞</th>
                        <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        <th>–¶–µ–Ω–∞</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for item in cart_items %}
                        <tr>
                            <td>{{ item.product.name }} ({{ item.packaging.weight|floatformat:2 }} –∫–≥)</td>
                            <td class="cart-qty">
                                <a href="{% url 'store:update_cart_quantity' item.product.id 'decrement' %}?packaging_id={{ item.packaging.id }}" class="qty-btn">-</a>
                                <span class="qty-count">{{ item.quantity }}</span>
                                <a href="{% url 'store:update_cart_quantity' item.product.id 'increment' %}?packaging_id={{ item.packaging.id }}" class="qty-btn">+</a>
                            </td>
                            <td>
                                {% if item.product.is_on_sale and item.packaging.sale_price %}
                                    <span class="old-price">{{ item.packaging.price }} –ª–≤.</span>
                                    <strong class="sale-price">{{ item.packaging.sale_price|floatformat:2 }} –ª–≤.</strong>
                                {% else %}
                                    <strong>{{ item.packaging.price|floatformat:2 }} –ª–≤.</strong>
                                {% endif %}
                            </td>
                            <td>
                                <a href="{% url 'store:remove_from_cart' item.product.id %}?packaging_id={{ item.packaging.id }}" class="delete-btn">üóë</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                    <tfoot>
                    <tr class="total-row">
                        <td colspan="2"></td>
                        <td colspan="2" class="cart-total">–û–±—â–æ: <strong>{{ cart_total|floatformat:2 }} –ª–≤.</strong></td>
                    </tr>
                    </tfoot>
                </table>
                <div class="cart-actions">
                    <a href="{% url 'store:store_home' %}" class="btn-secondary">‚Üê –ö—ä–º –º–∞–≥–∞–∑–∏–Ω</a>
                    <a href="{% url 'store:order_info' %}" class="btn btn-primary">–ü—Ä–æ–¥—ä–ª–∂–∏ –∫—ä–º –ø–æ—Ä—ä—á–∫–∞</a>
                </div>
            </div>
        {% else %}
            <section class="empty-cart-section" style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 420px;">
                <div class="empty-cart" style="text-align: center;">
                    <p class="cart-empty">–ö–æ–ª–∏—á–∫–∞—Ç–∞ –µ –ø—Ä–∞–∑–Ω–∞</p>
                    <img
                        src="{% static 'uploads/empty_cart.png' %}"
                        alt="Empty cart"
                        class="empty-cart-image"
                        style="display: block; margin: 0 auto;"
                    >
                </div>
                <div class="summary-actions" style="margin-top: 1.2rem;">
                    <a href="{% url 'store:store_home' %}" class="btn-secondary">‚Üê –ö—ä–º –º–∞–≥–∞–∑–∏–Ω</a>
                </div>
            </section>
        {% endif %}
    </div>
{% endblock %}
